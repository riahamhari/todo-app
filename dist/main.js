(()=>{"use strict";function e(e){localStorage.setItem("taskList",JSON.stringify(e))}function t(){return JSON.parse(localStorage.getItem("taskList"))}function n(e){localStorage.setItem("projectList",JSON.stringify(e))}function a(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function c(e){a(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===o(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function r(e){a(1,arguments);var t=c(e);return t.setHours(0,0,0,0),t}function i(){return r(Date.now())}function s(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function l(e,t){a(2,arguments);var n=c(e),o=s(t);return isNaN(o)?new Date(NaN):o?(n.setDate(n.getDate()+o),n):n}function d(e,t){a(2,arguments);var n=c(e).getTime(),o=c(t.start).getTime(),r=c(t.end).getTime();if(!(o<=r))throw new RangeError("Invalid interval");return n>=o&&n<=r}function u(e,t){a(2,arguments);var n=r(e),o=r(t);return n.getTime()===o.getTime()}function m(e){return a(1,arguments),u(e,Date.now())}function p(){document.querySelector("#taskListSection").innerHTML="";let e=document.getElementsByClassName("active")[0].innerText;for(let t=0;t<b(`${e}`).length;t++)j(b(`${e}`)[t])}function f(){const e=document.querySelectorAll(".sidebar-item");for(let t=0;t<e.length;t++)e[t].addEventListener("click",(function(){let e=document.getElementsByClassName("active");e[0].className=e[0].className.replace(" active",""),this.className+=" active"}));const t=document.querySelectorAll(".calendar-item");for(let e=0;e<t.length;e++)t[e].addEventListener("click",(function(){let e=document.getElementsByClassName("active");e[0].className=e[0].className.replace(" active",""),this.className+=" active"}))}const y=()=>{document.querySelector("#taskListSection").innerHTML=""},S=e=>{document.querySelector("#projectTitle").innerText=e},b=e=>t().length<=0?I.filter((t=>t.projectSelected===e)):t().filter((t=>t.projectSelected===e)),g=i(),v=l(g,7),k=t().filter((e=>d(new Date(e.date),{start:g,end:v}))),L=t().filter((e=>m(new Date(e.date))));let h=[];const E=()=>{const e={name:document.querySelector("#newProjectInput").value,tasks:[],taskNum:I.length};h.push(e),n(h),q(e),T(e)};function T(t){const a=document.querySelector("#projectGroup"),o=document.createElement("li");o.classList.add("list-group-item","border-0","sidebar-item","project-item"),o.innerHTML=`<div><i class="fa-regular fa-circle"></i>${t.name}</div><i id="deleteProject"\n    class="fa-solid fa-trash-can"></i>`,o.addEventListener("click",(()=>{S(`${t.name}`),y(),f();for(let e=0;e<b(`${t.name}`).length;e++)j(b(`${t.name}`)[e])})),o.querySelector("#deleteProject").addEventListener("click",(t=>{t.stopPropagation();const o=t.target.parentNode.innerText;console.log(o),a.innerHTML="",function(t){(function(e){const t=document.querySelector("#taskProject").options;for(let n=0;n<t.length;n++)t[n].text===e&&t.remove(n)})(t),h=[];const a=JSON.parse(localStorage.getItem("projectList")).filter((e=>e.name!==t));for(let e=0;e<a.length;e++)h.push(a[e]);localStorage.setItem("projectList","[]");const o=I.filter((e=>e.projectSelected!==t));a.forEach((e=>T(e))),e(o),n(a)}(o)}),{once:!0}),a.appendChild(o)}function q(e){const t=document.querySelector("#taskProject"),n=document.createElement("option"),a=document.querySelector("#editedTaskProject");n.setAttribute("value",`${e.name}`),n.innerText=e.name,t.appendChild(n),a.appendChild(n)}let N,D=0,I=[];function j(t){D++;const n=document.querySelector("#taskListSection"),a=document.createElement("li");a.classList.add("list-group-item","taskItem"),a.setAttribute("id",`task${D}`);const o=document.createElement("div");o.classList.add("taskName");const c=document.createElement("input");c.classList.add("form-check-input","me-1"),c.setAttribute("type","checkbox"),c.setAttribute("id",`todo${D}`);const r=document.createElement("label");r.classList.add("form-check-label"),r.setAttribute("data-bs-toggle","collapse"),r.setAttribute("data-bs-target",`#collapseDetails${D}`),r.setAttribute("aria-expanded","false"),r.setAttribute("aria-controls",`collapseDetails${D}`),r.setAttribute("type","button"),r.textContent=` ${t.name}`;const i=document.createElement("div");i.classList.add("taskAction"),document.createElement("div").classList.add("card"),document.createElement("div").classList.add("card-body");const s=document.createElement("div");s.classList.add("collapse"),s.setAttribute("id",`collapseDetails${D}`);const l=document.createElement("div");l.classList.add("card","card-body");const d=document.createElement("span");d.classList.add("list-group-item"),d.innerHTML=`<b>Due Date:</b> ${t.date} ${t.time}`;const u=document.createElement("span");u.classList.add("list-group-item"),u.innerHTML=`<b>Description:</b> ${t.description}`;const m=document.createElement("span");m.classList.add("list-group-item"),m.innerHTML=`<b>Priority:</b> ${t.priority}`;const p=document.createElement("i");p.classList.add("fa-regular","fa-pen-to-square","tt"),p.setAttribute("data-bs-placement","bottom"),p.setAttribute("title","edit"),p.setAttribute("type","button"),p.setAttribute("data-bs-toggle","modal"),p.setAttribute("data-bs-target","#updateTodoModal"),p.setAttribute("data-task-id",t.taskId),p.addEventListener("click",(e=>{const t=e.target.dataset.taskId,n=I.findIndex((e=>e.taskId===parseInt(t)));N=I[n],function(e){const t=document.querySelector("#editedTaskNameInput"),n=document.querySelector("#editedTaskDescription"),a=document.querySelector("#editedTaskDueDate"),o=document.querySelector("#editedTodoTime"),c=document.querySelector("#editedTaskPriority"),r=document.querySelector("#editedTaskProject");t.value=e.name,n.value=e.description,a.value=e.date,o.value=e.time,c.value=e.priority,r.value=e.projectSelected}(I[n])}));const f=document.createElement("i");f.classList.add("fa-solid","fa-flag","tt"),f.setAttribute("data-bs-placement","bottom"),f.setAttribute("title","Change Priority");const y=document.createElement("i");y.classList.add("fa-solid","fa-circle-arrow-right","tt"),y.setAttribute("data-bs-placement","bottom"),y.setAttribute("title","Move To Project");const S=document.createElement("i");S.classList.add("fa-regular","fa-trash-can","tt"),S.setAttribute("data-bs-placement","bottom"),S.setAttribute("data-task-id",t.taskId),S.addEventListener("click",(t=>{const a=t.target.dataset.taskId;console.log(a);const o=I.findIndex((e=>e.taskId===parseInt(a)));n.innerHTML="",function(t){console.log(t);let n=JSON.parse(localStorage.getItem("taskList"));n.splice(t,1),I.splice(t,1),e(n),n.forEach((e=>j(e))),function(){document.querySelector("#taskListSection").innerHTML="";let e=document.getElementsByClassName("active")[0].innerText;for(let t=0;t<A(`${e}`).length;t++)j(A(`${e}`)[t])}()}(o)})),S.setAttribute("title","Delete"),o.append(c,r),i.append(p,f,y,S),a.append(o,i),n.appendChild(a),l.append(d,u,m),s.appendChild(l),n.appendChild(s)}I=t();const A=e=>t().length<=0?I.filter((t=>t.projectSelected===e)):t().filter((t=>t.projectSelected===e)),x=i(),w=l(x,7);t().filter((e=>d(new Date(e.date),{start:x,end:w}))),t().filter((e=>m(new Date(e.date)))),function(){const e=document.querySelectorAll(".sidebar-item");for(let t=0;t<e.length;t++)e[t].addEventListener("click",(function(){let e=document.getElementsByClassName("active");e[0].className=e[0].className.replace(" active",""),this.className+=" active"}));const t=document.querySelectorAll(".calendar-item");for(let e=0;e<t.length;e++)t[e].addEventListener("click",(function(){let e=document.getElementsByClassName("active");e[0].className=e[0].className.replace(" active",""),this.className+=" active"}))}(),window.addEventListener("load",(()=>{for(let e=0;e<b("Inbox").length;e++)j(b("Inbox")[e]);JSON.parse(localStorage.getItem("projectList")).forEach((e=>{T(e),q(e)}))})),document.querySelector("#saveBtn").addEventListener("click",(function(){!function(){const t=document.querySelector("#editedTaskNameInput").value,n=document.querySelector("#editedTaskDescription").value,a=document.querySelector("#editedTaskDueDate").value,o=document.querySelector("#editedTodoTime").value,c=document.querySelector("#editedTaskPriority").value,r=document.querySelector("#editedTaskProject").value,i=I.findIndex((e=>e.taskId===N.taskId));I[i].name=t,I[i].description=n,I[i].date=a,I[i].time=o,I[i].priority=c,I[i].projectSelected=r,e(I)}(),p(),$("#updateTodoModal").modal("hide")})),document.querySelector("#today").addEventListener("click",(()=>{S("Today"),y(),L.forEach((e=>{j(e)}))})),document.querySelector("#nextSevenDays").addEventListener("click",(()=>{S("Next 7 Days"),y(),k.forEach((e=>{j(e)}))})),document.querySelector("#submitTaskBtn").addEventListener("click",(function(){!function(){const e=(t=document.querySelector("#taskNameInput").value,n=document.querySelector("#taskDescription").value,a=document.querySelector("#taskDueDate").value,o=document.querySelector("#todoTime").value,c=document.querySelector("#taskPriority").value,r=document.querySelector("#taskProject").value,D++,{name:t,description:n,date:a,time:o,priority:c,projectSelected:r,taskId:D});var t,n,a,o,c,r;I.push(e),j(e)}(),e(I),document.querySelector("#taskNameInput").value="",document.querySelector("#taskDescription").value="",document.querySelector("#taskDueDate").value="",document.querySelector("#todoTime").value="",p()})),document.querySelector("#submitProjectBtn").addEventListener("click",(function(){E(),document.querySelector("#newProjectInput").value="",document.querySelectorAll(".project-item").forEach((e=>e.addEventListener("click",(()=>{S(e.innerText),y();for(let t=0;t<b(e.innerText).length;t++)j(b(e.innerText)[t])})))),f()})),document.querySelectorAll(".sidebar-item").forEach((e=>e.addEventListener("click",(()=>{S(e.innerText),y(),f();for(let t=0;t<b(`${e.innerText}`).length;t++)j(b(`${e.innerText}`)[t])})))),document.querySelector("#inbox").addEventListener("click",(()=>{S("Inbox"),y(),f();for(let e=0;e<b("Inbox").length;e++)j(b("Inbox")[e])}))})();