(()=>{"use strict";function e(e){localStorage.setItem("taskList",JSON.stringify(e))}function t(){return JSON.parse(localStorage.getItem("taskList"))}function n(e){localStorage.setItem("projectList",JSON.stringify(e))}function a(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function c(e){a(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===o(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function r(e){a(1,arguments);var t=c(e);return t.setHours(0,0,0,0),t}function s(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function i(e,t){a(2,arguments);var n=r(e),o=r(t);return n.getTime()===o.getTime()}function l(){document.querySelector("#taskListSection").innerHTML="";let e=document.getElementsByClassName("active")[0].innerText;for(let t=0;t<p(`${e}`).length;t++)h(p(`${e}`)[t])}function d(){const e=document.querySelectorAll(".sidebar-item");for(let t=0;t<e.length;t++)e[t].addEventListener("click",(function(){let e=document.getElementsByClassName("active");e[0].className=e[0].className.replace(" active",""),this.className+=" active"}));const t=document.querySelectorAll(".calendar-item");for(let e=0;e<t.length;e++)t[e].addEventListener("click",(function(){let e=document.getElementsByClassName("active");e[0].className=e[0].className.replace(" active",""),this.className+=" active"}))}const u=()=>{document.querySelector("#taskListSection").innerHTML=""},m=e=>{document.querySelector("#projectTitle").innerText=e},p=e=>t().length<=0?k.filter((t=>t.projectSelected===e)):t().filter((t=>t.projectSelected===e));let f=[];const y=()=>{const e={name:document.querySelector("#newProjectInput").value,tasks:[],taskNum:k.length};f.push(e),n(f),S(e),g(e)};function g(t){const a=document.querySelector("#projectGroup"),o=document.createElement("li");o.classList.add("list-group-item","border-0","sidebar-item","project-item"),o.innerHTML=`<div><i class="fa-regular fa-circle"></i>${t.name}</div><i id="deleteProject"\n    class="fa-solid fa-trash-can"></i>`,o.addEventListener("click",(()=>{m(`${t.name}`),u(),d();for(let e=0;e<p(`${t.name}`).length;e++)h(p(`${t.name}`)[e])})),o.querySelector("#deleteProject").addEventListener("click",(t=>{t.stopPropagation();const o=t.target.parentNode.innerText;console.log(o),a.innerHTML="",function(t){(function(e){const t=document.querySelector("#taskProject").options;for(let n=0;n<t.length;n++)t[n].text===e&&t.remove(n)})(t),f=[];const a=JSON.parse(localStorage.getItem("projectList")).filter((e=>e.name!==t));for(let e=0;e<a.length;e++)f.push(a[e]);localStorage.setItem("projectList","[]");const o=k.filter((e=>e.projectSelected!==t));a.forEach((e=>g(e))),e(o),n(a)}(o)}),{once:!0}),a.appendChild(o)}function S(e){const t=document.querySelector("#taskProject"),n=document.createElement("option"),a=document.querySelector("#editedTaskProject");n.setAttribute("value",`${e.name}`),n.innerText=e.name,t.appendChild(n),a.appendChild(n)}let v,b=0,k=[];function h(t){b++;const n=document.querySelector("#taskListSection"),a=document.createElement("li");a.classList.add("list-group-item","taskItem"),a.setAttribute("id",`task${b}`);const o=document.createElement("div");o.classList.add("taskName");const c=document.createElement("input");c.classList.add("form-check-input","me-1"),c.setAttribute("type","checkbox"),c.setAttribute("data-task-id",t.taskId),c.setAttribute("id",`todo${b}`);const r=document.createElement("label");r.classList.add("form-check-label"),r.setAttribute("data-bs-toggle","collapse"),r.setAttribute("data-bs-target",`#collapseDetails${b}`),r.setAttribute("aria-expanded","false"),r.setAttribute("aria-controls",`collapseDetails${b}`),r.setAttribute("type","button"),r.textContent=` ${t.name}`,!0===t.completed?(c.checked=!0,r.style.textDecoration="line-through"):(c.checked=!1,r.style.textDecoration="none"),c.addEventListener("change",(t=>{if(t.target.checked){let n=t.target.dataset.taskId;k.find((e=>e.taskId===parseInt(n))).completed=!0,r.style.textDecoration="line-through",e(k)}else{let n=t.target.dataset.taskId;k.find((e=>e.taskId===parseInt(n))).completed=!1,r.style.textDecoration="none",e(k)}}));const s=document.createElement("div");s.classList.add("taskAction"),document.createElement("div").classList.add("card"),document.createElement("div").classList.add("card-body");const i=document.createElement("div");i.classList.add("collapse"),i.setAttribute("id",`collapseDetails${b}`);const l=document.createElement("div");l.classList.add("card","card-body");const d=document.createElement("span");d.classList.add("list-group-item"),d.innerHTML=`<b>Due Date:</b> ${t.date} ${t.time}`;const u=document.createElement("span");u.classList.add("list-group-item"),u.innerHTML=`<b>Description:</b> ${t.description}`;const m=document.createElement("span");m.classList.add("list-group-item"),m.innerHTML=`<b>Priority:</b> ${t.priority}`;const p=document.createElement("i");p.classList.add("fa-regular","fa-pen-to-square","tt"),p.setAttribute("data-bs-placement","bottom"),p.setAttribute("title","edit"),p.setAttribute("type","button"),p.setAttribute("data-bs-toggle","modal"),p.setAttribute("data-bs-target","#updateTodoModal"),p.setAttribute("data-task-id",t.taskId),p.addEventListener("click",(e=>{const t=e.target.dataset.taskId,n=k.findIndex((e=>e.taskId===parseInt(t)));v=k[n],function(e){const t=document.querySelector("#editedTaskNameInput"),n=document.querySelector("#editedTaskDescription"),a=document.querySelector("#editedTaskDueDate"),o=document.querySelector("#editedTodoTime"),c=document.querySelector("#editedTaskPriority"),r=document.querySelector("#editedTaskProject");t.value=e.name,n.value=e.description,a.value=e.date,o.value=e.time,c.value=e.priority,r.value=e.projectSelected}(k[n])}));const f=document.createElement("i");f.classList.add("fa-solid","fa-flag","tt"),f.setAttribute("data-bs-placement","bottom"),f.setAttribute("title","Priority"),"Low"===t.priority&&(f.style.color="var(--star-command-blue)"),"Medium"===t.priority&&(f.style.color="var(--alloy-orange)"),"High"===t.priority&&(f.style.color="var(--rufous)");const y=document.createElement("i");y.classList.add("fa-regular","fa-trash-can","tt"),y.setAttribute("data-bs-placement","bottom"),y.setAttribute("data-task-id",t.taskId),y.addEventListener("click",(t=>{const a=t.target.dataset.taskId;console.log(a);const o=k.findIndex((e=>e.taskId===parseInt(a)));n.innerHTML="",function(t){let n=JSON.parse(localStorage.getItem("taskList"));n.splice(t,1),k.splice(t,1),e(n),n.forEach((e=>h(e))),function(){document.querySelector("#taskListSection").innerHTML="";let e=document.getElementsByClassName("active")[0].innerText;for(let t=0;t<L(`${e}`).length;t++)h(L(`${e}`)[t])}()}(o)})),y.setAttribute("title","Delete"),o.append(c,r),s.append(f,p,y),a.append(o,s),n.appendChild(a),l.append(d,u,m),i.appendChild(l),n.appendChild(i)}t()&&(k=t());const L=e=>t().length<=0?k.filter((t=>t.projectSelected===e)):t().filter((t=>t.projectSelected===e));(function(){const e=document.querySelectorAll(".sidebar-item");for(let t=0;t<e.length;t++)e[t].addEventListener("click",(function(){let e=document.getElementsByClassName("active");e[0].className=e[0].className.replace(" active",""),this.className+=" active"}));const t=document.querySelectorAll(".calendar-item");for(let e=0;e<t.length;e++)t[e].addEventListener("click",(function(){let e=document.getElementsByClassName("active");e[0].className=e[0].className.replace(" active",""),this.className+=" active"}))})(),function(){window.addEventListener("load",(()=>{for(let e=0;e<p("Inbox").length;e++)h(p("Inbox")[e]);JSON.parse(localStorage.getItem("projectList")).forEach((e=>{g(e),S(e)}))})),document.querySelector("#saveBtn").addEventListener("click",(function(){!function(){const t=document.querySelector("#editedTaskNameInput").value,n=document.querySelector("#editedTaskDescription").value,a=document.querySelector("#editedTaskDueDate").value,o=document.querySelector("#editedTodoTime").value,c=document.querySelector("#editedTaskPriority").value,r=document.querySelector("#editedTaskProject").value,s=k.findIndex((e=>e.taskId===v.taskId));k[s].name=t,k[s].description=n,k[s].date=a,k[s].time=o,k[s].priority=c,k[s].projectSelected=r,e(k)}(),l(),$("#updateTodoModal").modal("hide")})),document.querySelector("#nextSevenDays").addEventListener("click",(()=>{m("Next 7 Days"),u();const e=t().filter((e=>{const t=new Date(e.date),n=r(Date.now()),o=function(e,t){a(2,arguments);var n=c(e),o=s(t);return isNaN(o)?new Date(NaN):o?(n.setDate(n.getDate()+o),n):n}(n,7);return function(e,t){a(2,arguments);var n=c(e).getTime(),o=c(t.start).getTime(),r=c(t.end).getTime();if(!(o<=r))throw new RangeError("Invalid interval");return n>=o&&n<=r}(t,{start:n,end:o})}));e.forEach((e=>{h(e)}))})),document.querySelector("#submitTaskBtn").addEventListener("click",(function(){!function(){const e=(t=document.querySelector("#taskNameInput").value,n=document.querySelector("#taskDescription").value,a=document.querySelector("#taskDueDate").value,o=document.querySelector("#todoTime").value,c=document.querySelector("#taskPriority").value,r=document.querySelector("#taskProject").value,b++,{name:t,description:n,date:a,time:o,priority:c,projectSelected:r,taskId:b,completed:!1});var t,n,a,o,c,r;k.push(e),h(e)}(),e(k),document.querySelector("#taskNameInput").value="",document.querySelector("#taskDescription").value="",document.querySelector("#taskDueDate").value="",document.querySelector("#todoTime").value="",l()})),document.querySelector("#submitProjectBtn").addEventListener("click",(function(){y(),document.querySelector("#newProjectInput").value="",document.querySelectorAll(".project-item").forEach((e=>e.addEventListener("click",(()=>{m(e.innerText),u();for(let t=0;t<p(e.innerText).length;t++)h(p(e.innerText)[t])})))),d()})),document.querySelectorAll(".sidebar-item").forEach((e=>e.addEventListener("click",(()=>{m(e.innerText),u(),d();for(let t=0;t<p(`${e.innerText}`).length;t++)h(p(`${e.innerText}`)[t])})))),document.querySelector("#inbox").addEventListener("click",(()=>{m("Inbox"),u(),d();for(let e=0;e<p("Inbox").length;e++)h(p("Inbox")[e])})),document.querySelector("#today").addEventListener("click",(()=>{const e=t().filter((e=>function(e){return a(1,arguments),i(e,Date.now())}(new Date(e.date))));m("Today"),u(),e.forEach((e=>{h(e)}))}));const n=document.querySelector(".fa-angle-down");n.addEventListener("click",(()=>{n.classList.toggle("rotate-90-degrees-clockwise"),n.classList.toggle("rotate-90-degrees-anti-clockwise")}))}()})();